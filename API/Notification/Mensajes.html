HTML
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ejemplo API Notification</title>
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin: 10px; }
        .btn-permiso { background-color: #007bff; color: white; border: none; }
        .btn-notif { background-color: #28a745; color: white; border: none; }
    </style>
</head>
<body>

    <h1>üì© Centro de Notificaciones</h1>
    <p>Para probar, primero habilita los permisos y luego env√≠a la notificaci√≥n.</p>

    <button class="btn-permiso" onclick="solicitarPermiso()">1. Habilitar Notificaciones</button>
    <button class="btn-notif" onclick="lanzarNotificacion()">2. Simular Mensaje Nuevo</button>

    <p id="estado">Estado: <strong>Desconocido</strong></p>

    <script>
        const estadoTexto = document.getElementById('estado');

        // Funci√≥n 1: Gestionar el Permiso
        function solicitarPermiso() {
            // Verificamos si ya apoy√≥ o deneg√≥ antes
            if (Notification.permission === "granted") {
                estadoTexto.innerHTML = "Estado: <strong>Concedido ‚úÖ</strong> (Ya ten√≠as permiso)";
            } else if (Notification.permission === "denied") {
                estadoTexto.innerHTML = "Estado: <strong>Denegado ‚ùå</strong> (Debes habilitarlo en el navegador)";
            } else {
                // Si es 'default', pedimos permiso (Lo que dicen tus apuntes)
                Notification.requestPermission().then(respuesta => {
                    if (respuesta === "granted") {
                        estadoTexto.innerHTML = "Estado: <strong>Concedido ‚úÖ</strong>";
                        new Notification("¬°Permiso aceptado!", { body: "Ahora puedes recibir avisos." });
                    } else {
                        estadoTexto.innerHTML = "Estado: <strong>Denegado ‚ùå</strong>";
                    }
                });
            }
        }

        // Funci√≥n 2: Crear la Notificaci√≥n Avanzada
        function lanzarNotificacion() {
            if (Notification.permission === "granted") {
                
                // Opciones avanzadas (cuerpo, icono, imagen...)
                const opciones = {
                    body: "Tienes un nuevo mensaje de soporte t√©cnico.",
                    icon: "https://cdn-icons-png.flaticon.com/512/1041/1041916.png", // Icono de ejemplo
                    vibrate: [200, 100, 200] // Vibra en m√≥viles (si el navegador lo soporta)
                };

                // Creamos el objeto Notification
                const notificacion = new Notification("Nuevo Mensaje", opciones);

                // Evento: Qu√© pasa si el usuario hace clic en la notificaci√≥n
                notificacion.onclick = function() {
                    window.focus(); // Intenta traer la ventana al frente
                    alert("Has hecho clic en la notificaci√≥n. Te llevamos al chat.");
                    notificacion.close(); // Cerramos la notificaci√≥n
                };

            } else {
                alert("No tienes permiso para mostrar notificaciones.");
            }
        }
    </script>
</body>
</html>
